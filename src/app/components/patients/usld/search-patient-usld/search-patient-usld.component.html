<div class="page-container">
    <h2 class="title">Recherche de patients (USLD)</h2>

    <div class="search-card">
        <div class="search-form">
            <select [(ngModel)]="critere" class="field">
                <option value="nom">Nom</option>
                <option value="prenom">Prénom</option>
                <option value="dateNaissance">Date de naissance</option>
                <option value="numeroChambre">Numéro de chambre</option>
                <option value="autonomie">Niveau d'autonomie</option>
            </select>

            <input class="field" type="text" [(ngModel)]="valeur" placeholder="Valeur à rechercher" />

            <button class="btn primary" (click)="rechercher()">Rechercher</button>
            <button class="btn" (click)="reset()">Réinitialiser</button>
        </div>
    </div>

    <div class="results-card" *ngIf="aDejaRecherche">
        <h3 class="subtitle">Résultats :</h3>

        <table class="table" *ngIf="patients.length > 0; else noResults">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nom</th>
                    <th>Prénom</th>
                    <th>Date de naissance</th>
                    <th>Chambre</th>
                    <th>Autonomie</th>
                    <th>Toilette assistée</th>
                    <th>Aide habillage</th>
                    <th>Aide repas</th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="let p of patients">
                    <td>{{ p.id }}</td>
                    <td>{{ p.nom }}</td>
                    <td>{{ p.prenom }}</td>
                    <td>{{ p.dateNaissance }}</td>
                    <td>{{ p.numeroChambre || '—' }}</td>
                    <td>{{ p.niveauAutonomie || '—' }}</td>
                    <td>{{ p.toiletteAssistee ? 'Oui' : 'Non' }}</td>
                    <td>{{ p.aideHabillage ? 'Oui' : 'Non' }}</td>
                    <td>{{ p.aideRepas ? 'Oui' : 'Non' }}</td>
                </tr>
            </tbody>
        </table>

        <ng-template #noResults>
            <p class="empty">Aucun patient trouvé.</p>
        </ng-template>
    </div>
</div>